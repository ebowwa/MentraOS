# MentraOS Audio System Configuration
# Enables PDM microphone and I2S audio output for complete audio pipeline

# Core system configuration
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048

# Audio subsystem
CONFIG_AUDIO=y

# I2S Audio Output Driver
CONFIG_I2S=y
CONFIG_NRFX_I2S=y
CONFIG_NRFX_I2S0=y

# PDM Microphone Driver  
CONFIG_PDM=y
CONFIG_NRFX_PDM=y
CONFIG_NRFX_PDM0=y

# GPIO for status indication
CONFIG_GPIO=y

# Audio clock configuration
CONFIG_CLOCK_CONTROL=y
CONFIG_NRFX_CLOCK=y
CONFIG_CLOCK_CONTROL_NRF_K32SRC_XTAL=y
CONFIG_CLOCK_CONTROL_NRF_K32SRC_500PPM=y

# High frequency clock for audio precision
CONFIG_CLOCK_CONTROL_NRF_HFCLK_DIV=1

# Audio clock (ACLK) for I2S and PDM
CONFIG_NRFX_CLOCK_LFCLK_RC=y

# Memory management for audio buffers
CONFIG_HEAP_MEM_POOL_SIZE=8192
CONFIG_SLAB_ALLOC=y

# Logging configuration for debugging
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_LOG_BACKEND_UART=y
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_SERIAL=y

# Thread and synchronization
CONFIG_MULTITHREADING=y
CONFIG_NUM_COOP_PRIORITIES=10
CONFIG_NUM_PREEMPT_PRIORITIES=15
CONFIG_THREAD_NAME=y
CONFIG_THREAD_STACK_INFO=y

# Ring buffer for audio data flow
CONFIG_RING_BUFFER=y

# Math library for audio processing
CONFIG_NEWLIB_LIBC=y
CONFIG_NEWLIB_LIBC_FLOAT_PRINTF=y

# Power management (can be disabled for debug)
CONFIG_PM=n

# Networking disabled for audio focus
CONFIG_NETWORKING=n
CONFIG_BT=n

# USB for development (optional)
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_CDC_ACM=y

# Debug features
CONFIG_DEBUG=y
CONFIG_DEBUG_OPTIMIZATIONS=y
CONFIG_ASSERT=y
CONFIG_ASSERT_LEVEL=2

# Performance monitoring
CONFIG_TIMING_FUNCTIONS=y
CONFIG_THREAD_RUNTIME_STATS=y

# Pin control configuration
CONFIG_PINCTRL=y

# Device tree overlay
CONFIG_DTC_OVERLAY_FILE="mentraos_audio.overlay"
